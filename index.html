<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="style.css"></style>
</head>
<body>
	<ul id="repos"></ul>
	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script>
		var contents,repos;
		function showAll(){
			$('#repos').html([].concat(repos,contents)
				.filter(function(a){return !(a.type&&a.type!='dir')})
				.sort(function(a,b){return b.name.toLowerCase()<a.name.toLowerCase();})
				.map(function(bloc){return '<li class="bloc '+(bloc.type?'app':'repo')+'">'+
					'<div class="name"><a href="'+(bloc.type?bloc.path:bloc.html_url)+'">'+(bloc.full_name||'/'+bloc.name).split('/').slice(1)+'</a></div>'+
					'<div class="desc"><div class="desc_">'+(bloc.description||'')+'</div></div>'+
					'<div class="date">'+(bloc.type?'':(new Date(bloc.updated_at)).toLocaleDateString()||'')+'</div>'+
					'<div class="lang">'+(bloc.type?'webapp':bloc.language||'')+'</div>'+
				'</li>';}));
		};
		$('#repos').html('<div class="wait">Loading...</div>');
		//retreive webapps/repo
		var remain_requests=2;
		$.get('https://api.github.com/repos/yne/yne.github.io/contents/',function(c){
			contents=c;
			if(!--remain_requests)showAll();
		});
		$.get('https://api.github.com/users/yne/repos',function(r){
			repos=r;
			if(!--remain_requests)showAll();
		})
	</script>
</body>
</html>