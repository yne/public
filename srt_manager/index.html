<!DOCTYPE HTML>
<html>
<head>
<style>
.tool>*{
	display:block;
	text-align: right;
}
.tool {
	position: absolute;
	border: 1px solid #000;
	border-radius: 5px;
	padding: 5px;
	right: 50%;
	bottom: 2em;
	background: #FFF;
}
textarea{
	resize: none;
	position: absolute;
	width: 50%;
	height: 100%;
	top: 0;
	padding: 0;
	margin: 0;
	border:0;
	box-shadow: 0px 0px 2px #000 inset;
}
</style>
<script>
function stringsToTime(s){
	return s[0]*3600 + s[1]*60 + (s[2]+'.'+s[3])*1;
}
function timeToString(t){
	var h=(t/3600)|0;
	var m=((t-(h*3600))/(60))|0;
	var s=(t%60)|0;
	var ms=((t%1)*1000)|0;
	
	return ''+h+':'+m+':'+s+','+ms;
}
function convert(input){
	var strech=eval(document.getElementById('strech').value);
	var offset=eval(document.getElementById('offset').value);
	return input.split(/\n/).map(function(line,i,b,c){
		var timestamps=line.match(/(\d+):(\d+):(\d+),(\d+) --> (\d+):(\d+):(\d+),(\d+)/);
		if(!timestamps)return line;//not a timestamp line
		return   timeToString(stringsToTime(timestamps.slice(1, 5))*strech+offset)+
		' --\> '+timeToString(stringsToTime(timestamps.slice(5,10))*strech+offset);
	}).join('\n');
}
function main(){
	document.getElementById('mod').value=convert(document.getElementById('ori').value)
}
</script>
</head>
<body>
<textarea id="ori" spellcheck="false" placeholder="paste source here" style="left :0;"></textarea>
<textarea id="mod" spellcheck="false" readonly placeholder="see result here" style="right:0;color: #666;"></textarea>
<div class="tool">
	<span>stretch ratio :</span>
	<input id="strech" size="7" value="1.0000" onkeyup="main()"/>
	<span>offset (sec) : </span>
	<input id="offset" size="7" value="0" onkeyup="main()"/>
</div>
</body>
</html>
