<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
	<script>
		$=function(sel,base){return (base||document).querySelector(sel)};
		$$=function(sel,base){return [].slice.call((base||document).querySelectorAll(sel))};
		El=function(name,attr){var el=document.createElement(name);for(var i in attr)el.setAttribute(i,attr[i]);return el;}
	</script>
	<script src="TitleMap.js"></script>
	<script src="TitleMap.utils.js"></script>
	<script src="TitleMap.GUI.js"></script>
	<link rel="stylesheet" href="style.css"></style>
</head>
<body onload="P=new TitleMap()">
<button class="aside_open" onclick="$('aside').hidden=false;">File</button>

<aside _hidden><button class="close" onclick="$('aside').hidden=true;">&times;</button>
<form onsubmit="var e=this.elements;try{
	P.fromImageFile(+e.size.value,e.file.files[0],P.showTitles);
	}catch(e){console.error(e)};return false;">
	<legend><input type="submit" value="Load"/> from image dump 
	<select onchange="if(this.value)location.href=this.value">
		<option value="">File Example</option>
		<option value="http://i.imgur.com/K8JpoCs.png">Zelda NES</option>
		<option value="http://i.imgur.com/b66Y95q.png">Zelda GBC</option>
		<option value="http://www.vgmaps.com/Atlas/SuperNES/LegendOfZelda-ALinkToThePast-LightWorld.png">Zelda SNES (LW)</option>
		<option value="http://www.vgmaps.com/Atlas/SuperNES/LegendOfZelda-ALinkToThePast-DarkWorld.png">Zelda SNES (DW)</option>
	</select></legend>
	<select name="size" title="Titles size"><option>8</option><option selected>16</option><option>32</option></select>
	<input name="file" type="file" accept="image/*" title="Image file" required/>
</form>
<form onsubmit="var e=this.elements;try{
	P.fromFiles(+e.s.value,e.map.files[0],e.ttl.files[0],e.sub.files[0]);
	}catch(e){console.error(e)};return false;">
	<legend><input type="submit" value="Load"/> from files [.map .ttl .sub]</legend>
	<select name="s" title="Titles size"><option>8</option><option selected>16</option><option>32</option></select>
	<input name="ttl" accept=".ttl" type="file" title="Title file" required/>
	<select name="map_u" title="MapDataType"><option value="8">u8</option><option value="16">u16</option></select>
	<input name="map" accept=".map" type="file" title="Map file" required/>
	<input name="sub" accept=".sub" type="file" title="Sub file (optional)"/>
</form>
<form onsubmit="var e=this.elements;try{
	P.toHref(e.do_sub.checked,$('[name=map]',this),$('[name=ttl]',this),$('[name=sub]',this));
	}catch(e){console.error(e)}return false;">
	<legend><input type="submit" value="Save"/> to files</legend>
	<a name="ttl">titles</a>
	<a name="att">attr</a>
	<a name="map">info</a>
	<input name="do_sub" type="checkbox"/><a name="sub">sub</a>
</form>
</aside>
<div class="map_container">
	<canvas id="view"></canvas>
</div>

<div class="hud">
	<div class="conf">
		<input id="size" title="Titles size (px)" size="4" readonly />
		<input id="width" title="Map width (Title)" size="4" readonly />
	</div>
	<div class="titles_container"><span id="titles"/></div>
</div>

</body>
</html>